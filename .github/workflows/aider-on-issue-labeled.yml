name: Auto-generate PR using Aider

on:
  workflow_call: 
    inputs:
      issue-number:
        required: true
        type: number
      base-branch:
        required: true
        type: string
    secrets:
      required:
        - anthropic_api_key

jobs:
  generate:
    uses: mirrajabi/aider-github-workflows/.github/workflows/aider-issue-to-pr.yml@main
    with:
      issue-number: ${{ inputs['issue-number'] }}
      base-branch: ${{ inputs['base-branch'] }}
      model: anthropic/claude-3-sonnet-20240229
    secrets: 
      anthropic_api_key: ${{ secrets.anthropic_api_key }}
